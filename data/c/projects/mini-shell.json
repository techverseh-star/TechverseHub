{
  "id": "c-3",
  "title": "Mini Shell",
  "language": "c",
  "difficulty": "Advanced",
  "duration": "10-15 hours",
  "description": "Build a Unix-like command shell.",
  "overview": "Create a basic shell that can execute commands.",
  "concepts": [
    "fork/exec",
    "Pipes",
    "System calls",
    "Signal handling"
  ],
  "steps": [
    {
      "title": "Step 1 parsing",
      "description": "Parse user input."
    },
    {
      "title": "Step 2 commands",
      "description": "Fork and exec."
    },
    {
      "title": "Step 3-in commands",
      "description": "Add cd, exit, etc."
    }
  ],
  "starterCode": "#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#include <unistd.h>\n\nvoid parseCommand(char* input, char** args) {\n    // TODO input into args\n}\n\nvoid executeCommand(char** args) {\n    // TODO and execute\n}\n\nint main() {\n    char input[256];\n    char* args[10];\n    \n    while (1) {\n        printf(\"myshell> \");\n        fgets(input, 256, stdin);\n        input[strlen(input)-1] = '\\0';\n        \n        if (strcmp(input, \"exit\") == 0) break;\n        \n        // TODO and execute\n    }\n    return 0;\n}\n",
  "solution": "#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n#include <unistd.h>\n#include <sys/wait.h>\n\nvoid parseCommand(char* input, char** args) {\n    int i = 0;\n    args[i] = strtok(input, \" \");\n    while (args[i] != NULL) {\n        args[++i] = strtok(NULL, \" \");\n    }\n}\n\nvoid executeCommand(char** args) {\n    pid_t pid = fork();\n    if (pid == 0) {\n        execvp(args[0], args);\n        perror(\"exec failed\");\n        exit(1);\n    } else {\n        wait(NULL);\n    }\n}\n\nint main() {\n    char input[256];\n    char* args[10];\n    \n    while (1) {\n        printf(\"myshell> \");\n        if (!fgets(input, 256, stdin)) break;\n        input[strlen(input)-1] = '\\0';\n        \n        if (strcmp(input, \"exit\") == 0) break;\n        if (strlen(input) == 0) continue;\n        \n        parseCommand(input, args);\n        executeCommand(args);\n    }\n    return 0;\n}\n"
}